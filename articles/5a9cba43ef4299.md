---
title: "SwiftUI ã‚«ã‚¹ã‚¿ãƒ ã—ãŸã‚¢ãƒ©ãƒ¼ãƒˆã‚’æ¡ä»¶ã«ã‚ˆã£ã¦å‡ºã—åˆ†ã‘ã‚‹"
emoji: "ğŸ˜‡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["SwiftUI","Swift"]
published: true
---


# ã‚„ã‚ŠãŸã„ã“ã¨
ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ãŸã‚Šä½•ã‹ã—ã‚‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸã¨ãã«ã‚«ã‚¹ã‚¿ãƒ ã—ãŸã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ãŸã„
é »å‡ºã™ã‚‹ã®ã«ãƒ‘ã£ã¨ã‚³ãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿ã®æµã‚ŒãŒæ€ã„ã¤ã‹ãªã‹ã£ãŸã‚Šã—ãŸã®ã§,è‡ªåˆ†ãªã‚Šã«å®Ÿè£…å†…å®¹ã‚’æ•´ç†ã—ã¦ã¿ã¾ã—ãŸ.
![](/images/article_4/mock.gif)

# ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’å¯è¦–åŒ–ã™ã‚‹
SwiftUIã¯ãƒ‡ãƒ¼ã‚¿ãŒè¤‡æ•°ã®Viewé–“ã§ã‚„ã‚Šå–ã‚Šã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãŸã‚,ã™ãã«ã‚³ãƒ¼ãƒ‰ã«è½ã¨ã—è¾¼ã‚€ã“ã¨ãŒé›£ã—ã‹ã£ãŸã‚Šã—ã¾ã™.
ãã“ã§ä¾¿åˆ©ãªã®ãŒMiro! 
UMLæ›¸ãã®ã¯ã—ã‚“ã©ã„ã‘ã©,è»½ããƒ¡ãƒ¢ã‚·ãŸã„ã¨ã„ã†ã¨ãã«ä¾¿åˆ©ã§ã™

ä»Šå›ã¯,ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã‚’ã—ãŸå†…å®¹ã«å¿œã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å‡ºã—åˆ†ã‘ã‚‹ã¨ã„ã†å®Ÿè£…ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™

### å‡¦ç†ã®æµã‚Œ
===
â‘  AccountViewã§ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
â‘¡ ViewModelã§å…¥åŠ›å†…å®¹ã‚’åˆ¤å®š
â‘¢ åˆ¤å®šã«å¿œã˜ã¦Alertæ§‹é€ ä½“ã‚’è¿”ã™
â‘£ åˆ¤å®šçµæœã®Alertã‚’AlertViewã«ã‚ãŸã™
â‘¤ Alertã®å†…å®¹ã«å¿œã˜ã¦è¡¨ç¤ºå†…å®¹ã‚’å¤‰æ›´ã—ã¦OKã‚¿ãƒƒãƒ—ã‚’ã™ã‚‹ã¨AccountViewã‚’è¡¨ç¤ºã™ã‚‹
![](/images/article_4/2022-03-04-01-12-38.png)

:::message 
ä»Šå›ã¯å®Ÿéš›ã®ä¿å­˜å‡¦ç†ã«ã¤ã„ã¦ã¯è¨˜è¼‰ã—ã¾ã›ã‚“. 
:::
# å®Ÿè£…ã—ã¦ã„ã
## Viewã®å®Ÿè£…
### 1. AccountView
   ã“ã“ã§ã¯,å…¥åŠ›ã‚’å—ã‘å–ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ä¿å­˜ã‚’è¡Œã†ãƒœã‚¿ãƒ³ã‚’å®šç¾©ã—ã¦ãŠãã¾ã™.
   AlertViewã®è¡¨ç¤ºã¯shownã§ç®¡ç†ã—,VSTACKã®ä¸Šã«overlayã§è¡¨ç¤ºã™ã‚‹ã“ã¨ã«ã—ã¾ã™.
```swift
struct AccountView: View {
    @StateObject var viewModel = ViewModel()
    var body: some View {
        ZStack {
            VStack {
                VStack {
                    Form {
                        Section {
                            TextField("ãŠã‚ŒãŒæ‚Ÿç©ºã§ãŠå‰ãŒ", text: $viewModel.input)
                        }
                        HStack {
                            Spacer()
                            Button("Save") { // Button title
                                // Button action
                                viewModel.save()
                            }
                            Spacer()
                        }//: HSTACK
                    }//: FORM
                }//: VSTACK
            }//: VSTACK
            .overlay {
                if viewModel.shown {
                    CutomAlertView(shown: $viewModel.shown, alert: viewModel.alert!) // AlertView intialize with shown property
                   }
            }//: Overlay
        }//: ZSTACK
    }
}
```

### 2. AlertView
Alertã®å®Œæˆå½¢ã¯ç”»åƒã®ã‚ˆã†ã«ãªã‚Šã¾ã™.æˆåŠŸæ™‚ã¨å¤±æ•—æ™‚ã§ãƒ†ã‚­ã‚¹ãƒˆ,ç”»åƒ,è‰²ã®3ã¤ã‚’å¤‰ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™
ä»Šå›ã¯Alertã‚’ä»‹ã—ã¦è¡¨ç¤ºå†…å®¹ã‚’æ±ºå®šã™ã‚‹ã¨ã„ã†å½¢ã«ã—ã¾ã—ãŸ.
ã¾ãŸ,shownã¯OKãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨falseã«ãªã‚ŠAlertãŒæ¶ˆãˆã¾ã™
![](/images/article_4/simulator_screenshot_A2F008D9-10AB-4E69-9909-C6BF80559D7B.png  =250x)![](/images/article_4/simulator_screenshot_B7B4717D-F6B1-4F91-B58B-F4DAA675BA13.png =250x)


```swift
struct CutomAlertView: View {
    
    @Binding var shown: Bool
    var alert: Alert
    
    var body: some View {
        VStack {            
            Image(systemName: alert.imageName)
                .resizable().frame(width: 50, height: 50)
                .padding(.top, /*@START_MENU_TOKEN@*/10/*@END_MENU_TOKEN@*/)
                .foregroundColor(Color(alert.title))
            Spacer()
            Text(alert.message).foregroundColor(Color.white)
            Spacer()
            Divider()
            HStack {
                Button("Ok") {                    
                    shown.toggle()
                }//: BUTTON
                .frame(width: UIScreen.main.bounds.width, height: 40)
                .foregroundColor(.white)
            }//: HSTACK
        }//: VSTAC
        .frame(width: UIScreen.main.bounds.width-50, height: 200)
        .background(Color.black.opacity(0.5))
        .cornerRadius(12)
        .clipped()
        
    }
}
```
## Alertã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å®šç¾©
AlertViewã®è¡¨ç¤ºå†…å®¹ã‚’å®šç¾©ã—ãŸAlertã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã—ã¾ã™
AlertContextã«å„ã‚±ãƒ¼ã‚¹åˆ¥ã®æ¡ä»¶ã‚’è¨­å®šã—ã¦ãŠãã“ã¨ã«ã—ã¾ã—ãŸ.
:::message alert
ãªãŠ,ä»Šå›ã¯Assetsã«colorã‚’äºˆã‚ç™»éŒ²ã—ã¦ãŠã‚Š,ãã®è¨­å®šã—ã¦ã„ã‚‹keyã‚’ã“ã“ã§æ¸¡ã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™.
:::

```swift
struct Alert {
    var color: String
    var message: String
    var imageName: String
}

struct AlertContext {
    static let sucess = Alert(color: "Sucess", message: "Data storing is sucess!!", imageName: SFSymbolString.sucess.rawValue)
    static let empty = Alert(color: "Failer", message: "Empty input is not allowed.", imageName: SFSymbolString.failer.rawValue)
    static let invalidData = Alert(color: "Failer", message: "Something went wrong.", imageName: SFSymbolString.failer.rawValue)
}

enum SFSymbolString: String {
    case sucess = "checkmark.circle.fill"
    case failer = "xmark.circle.fill"
}
```

## ViewModelã®å®Ÿè£…
ãƒœã‚¿ãƒ³ãŒã‚¿ãƒƒãƒ—ã•ã‚Œã‚‹ã¨ã¾ãš`save`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™
ä»Šå›ã¯`isValidInput`ã¨ã„ã†propertyã§æ¡ä»¶ã«å¿œã˜ã¦`AlertContext`ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™.
ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§`shown`ã‚’`true`ã«ã™ã‚‹ã“ã¨ã§AlertãŒè¡¨ç¤ºã•ã‚Œã¾ã™
```swift
class ViewModel: ObservableObject {
    
    @Published var shown = false // trigger
    @Published var input = ""
    @Published var alert: Alert?
    
    // store data
    func save() {
        guard isValidInput else { return }
        alert = AlertContext.sucess
        shown = true
    }    
    // validation input data
    var isValidInput: Bool {
        if input.isEmpty {
            alert = AlertContext.empty
            return false
        } else if !(input == "ãƒ™ã‚¸ãƒ¼ã‚¿") {
            alert = AlertContext.invalidData
            return false
        }
        return true
    }
}
```



# ã¾ã¨ã‚
ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã¾ã§ã¯è¡Œã‹ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒ,ã‚«ã‚¹ã‚¿ãƒ ã—ãŸã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä½¿ã„ãŸã„ã¨ã„ã†æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™!
ä¸‹è¨˜ã«ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹ã®ã§ãŠè©¦ã—ã‚ã‚Œ!
https://github.com/haji44/SwiftUISampleCustomeAlert
